<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"> 
    <title>Material Design swipe to refresh</title>
    <link rel="stylesheet" href="../material-refresh.min.css" />
    <link rel="stylesheet" href="styles/css/demo.css" />
</head>
<body>
    <header id="navMain" class="nav-bar">
        <div class="nav-wrapper">
            <span class="title">Material Refresh</span>
            <span id="doRotate">
                <span  class="rotate-btn"></span>
            </span>
        </div>
    </header>

    <div id="contentMain" class='contents'>
        <span id="forkongithub"><a target="_blank" href="https://github.com/lightningtgc/material-refresh">Fork me on GitHub</a></span>
      <div class='demo-block intro'>
          <h2>Intro <iframe src="http://ghbtns.com/github-btn.html?user=lightningtgc&repo=material-refresh&type=watch&count=true"
          allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe></h2>
          <h3> Google Material Design swipe (pull) to refresh.  </h3> 
          <p> It uses CSS3 and JavaScript depend on <a class="no-border" href="https://github.com/madrobby/zepto" target="_blank">Zepto</a> or <a class="no-border" href="https://github.com/jquery/jquery" target="_blank">jQuery</a>. </p>
          <p> Mobile Only and High Performance.  </p>
          <p> You can use 3 types of this Material Design refresher.  </p>
    </div>
    <div class='demo-block'>
        <h3>Type1: Above surface (default)</h3>
        <img src="styles/images/above.gif" alt="Above surface" />

        <p>Source code:</p>
        <p>
            <div class="demo-code">
                mRefresh();
            </div>
        </p>
        <h4> You can try it in mobile browser or webview by scanning the following QR code: </h4>

        <img src="styles/images/qr-above.png" alt="QR" class="qr-img"/>
        <p>
        <a href="http://lightningtgc.github.io/material-refresh/type1.html">URL: http://lightningtgc.github.io/material-refresh/type1.html</a>
        </p>
    </div>
    <div class="demo-block">
        <h3>Type2: Below surface</h3>
        <img src="styles/images/below-color.gif" alt="Below surface" class="half-img"/>

        <p>Source code:</p>
        <div class="demo-code">
            mRefresh({
            <p class="indent">
                nav: '#navMain'
            </p>
            });
        </div>

        <h4> Actually, this page is the demo for Type2. </h4>
        <h4> You can try it in chrome device mode or other mobile emulator. </h4>

        <h4> Similarly, try it in mobile browser or webview by scanning the following QR code: </h4>

        <img src="styles/images/qr-below.png" alt="QR" class="qr-img"/>
        <p>
        <a href="http://lightningtgc.github.io/material-refresh/index.html">URL: http://lightningtgc.github.io/material-refresh/index.html</a>
        </p>

    </div>
    <div class="demo-block">
        <h3>Type3: Button action</h3>
        <img src="styles/images/button-action.gif" alt="Button action" class="half-img"/>

        <p>Source code:</p>
        <div class="demo-code">
            $('#buttonAction').on('tap', function(){
            <p class="indent">
                mRefresh.refresh();
            </p>
            });
        </div>

        <h4>Click this button ↓↓ to try it and notice the top of page ↑↑</h4>
        <div id="buttonAction" class="rotate-btn-wrapper">
            <div class="demo-rotate-btn rotate-btn"></div>
        </div>
    </div>     

    <div class="demo-block demo-footer">
        <h2>More details</h2>
        <a target="_blank" href="https://github.com/lightningtgc/material-refresh"> See more details and options on Github</a>
        <br>
        <br>
        <a target="_blank" href="http://opensource.org/licenses/mit-license.php"> MIT  ©  gctang</a>
    </div>
   
    <script type="text/javascript" src="libs/zepto.min.js"></script>
    <script type="text/javascript" src="../material-refresh.min.js"></script>
    <script type="text/javascript">
        ;(function(){
            // Init Type2 
            mRefresh({
                nav: '#navMain',
                scrollEl: '#contentMain'
            })
            // Button on the top of page
            $('#doRotate').on('tap click',function(){
                mRefresh.refresh();   
                return false;
            });

            // Content demo button
            $('#buttonAction').on('tap click', function(){
                mRefresh.refresh({
                    onBegin: function(){
                        alert('It begin to rotate! You can do something like pull ajax data!');
                    }    
                    });
                return false;
            });   



            // prevent browser scroll
            $('#navMain').on('touchstart', function(e){
                 e.preventDefault();
            });
	        // Handle the start of interactions
            $('#contentMain').on('touchmove', function(e){
                var el = document.getElementById("contentMain");
                var startTopScroll = el.scrollTop;

                if (startTopScroll <= 0) {
                    el.scrollTop = 1;
                }
                if(startTopScroll + el.offsetHeight >= el.scrollHeight) {
                    el.scrollTop = el.scrollHeight - el.offsetHeight - 1;
                }
            });

        })();
    </script>
</body>
</html>
